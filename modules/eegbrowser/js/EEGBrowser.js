!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}({0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function makeRegions(numRegions){for(var regions=[],i=0;i<numRegions;i+=1){var center=new Array(3).fill(0).map(function(){return 2*Math.random()-1}),region=new Region("region"+i,"Region "+i,center);regions.push(region)}return regions}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(15),_react2=_interopRequireDefault(_react),NUM_REGIONS=8,POINTS_PER_REGION=5,SAMPLES_PER_POINT=200,Region=function(){function Region(name,label,center){_classCallCheck(this,Region),this.name=name,this.label=label,this.points=[],this.generatePoints(POINTS_PER_REGION,center)}return _createClass(Region,[{key:"generatePoints",value:function(numPoints,center){for(var i=0;i<numPoints;i+=1){var point=new Array(3).fill(0).map(function(){return(2*Math.random()-1)/NUM_REGIONS});point[0]+=center[0],point[1]+=center[1],point[2]+=center[2],this.points.push(new Point(point,SAMPLES_PER_POINT))}}}]),Region}(),Point=function Point(position,timeSamples){var _this=this,tmin=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,tmax=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60;_classCallCheck(this,Point),this.tmin=tmin,this.tmax=tmax,this.domain=new Float32Array(timeSamples).fill(0),this.domain.forEach(function(_,i){var t=i/timeSamples;_this.domain[i]=tmin*(1-t)+tmax*t}),this.signal=new Float32Array(timeSamples).fill(0),this.signal.forEach(function(_,i){_this.signal[i]=2*Math.random()-1}),this.position=position,this.hovered=!1},RegionSelect=function(_Component){function RegionSelect(props){_classCallCheck(this,RegionSelect);var _this2=_possibleConstructorReturn(this,(RegionSelect.__proto__||Object.getPrototypeOf(RegionSelect)).call(this,props));return _this2.defaultProps={regions:[],selected:[]},_this2}return _inherits(RegionSelect,_Component),_createClass(RegionSelect,[{key:"render",value:function(){var _this3=this,regionElement=function(region,selected,onclick){return _react2.default.createElement("li",{key:region.name,className:selected?"selected-region":"unselected-region",onClick:function(){return onclick(region)}},region.label+(selected?"*":""))},regionElements=this.props.regions.map(function(region){return _this3.props.selected.find(function(r){return r===region})?regionElement(region,!0,_this3.props.unselectRegion):regionElement(region,!1,_this3.props.selectRegion)});return _react2.default.createElement("div",{className:"region-select"},_react2.default.createElement("ul",{className:"region-select-list"},regionElements))}}]),RegionSelect}(_react.Component),MRIView=function(_Component2){function MRIView(){return _classCallCheck(this,MRIView),_possibleConstructorReturn(this,(MRIView.__proto__||Object.getPrototypeOf(MRIView)).apply(this,arguments))}return _inherits(MRIView,_Component2),_createClass(MRIView,[{key:"componentDidMount",value:function(){function run(){renderer.render(self.scene,self.camera),window.requestAnimationFrame(run.bind(self))}var _canvas$getBoundingCl=this.canvas.getBoundingClientRect(),width=_canvas$getBoundingCl.width,height=_canvas$getBoundingCl.height,renderer=new THREE.WebGLRenderer({canvas:this.canvas});renderer.setSize(width,height),this.camera=new THREE.PerspectiveCamera(45,width/height,1,1e3),this.camera.position.z=3,this.camera.lookAt(new THREE.Vector3(0,0,0)),this.controls=new THREE.OrbitControls(this.camera,this.canvas),this.scene=new THREE.Scene,this.attachPoints();var self=this;run()}},{key:"componentDidUpdate",value:function(){this.attachPoints()}},{key:"attachPoints",value:function(){for(var _this5=this;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);var material=new THREE.MeshBasicMaterial({color:3450963}),geometry=new THREE.SphereBufferGeometry(1/(10*NUM_REGIONS),8,8);this.props.regions.forEach(function(region){region.points.forEach(function(point){var mesh=new THREE.Mesh(geometry,material);_this5.scene.add(mesh),mesh.position.fromArray(point.position)})})}},{key:"render",value:function(){var _this6=this;return _react2.default.createElement("canvas",{className:"mri-view",width:"450",height:"400",ref:function(canvas){_this6.canvas=canvas}})}}]),MRIView}(_react.Component),SignalPlots=function(_Component3){function SignalPlots(){return _classCallCheck(this,SignalPlots),_possibleConstructorReturn(this,(SignalPlots.__proto__||Object.getPrototypeOf(SignalPlots)).apply(this,arguments))}return _inherits(SignalPlots,_Component3),_createClass(SignalPlots,[{key:"componentDidMount",value:function(){this.renderPlots()}},{key:"componentDidUpdate",value:function(){this.renderPlots()}},{key:"renderPlots",value:function(){var _this8=this,WIDTH=400,HEIGHT=200;d3.select(this.container).selectAll("svg").remove(),this.props.regions.forEach(function(region){region.points.forEach(function(point){var tmin=point.tmin,tmax=point.tmax,idx=point.domain.map(function(_,i){return i}),x=d3.scale.linear().domain([tmin,tmax]).rangeRound([0,WIDTH]),y=d3.scale.linear().domain([-2,2]).rangeRound([HEIGHT/1.6,0]),line=d3.svg.line().x(function(i){return x(point.domain[i])}).y(function(i){return y(point.signal[i])}),g=d3.select(_this8.container).append("svg").attr("width",WIDTH).attr("height",HEIGHT).append("g").attr("transform","translate(60, 10)"),xAxis=d3.svg.axis().scale(x).ticks(20).orient("bottom"),yAxis=d3.svg.axis().scale(y).ticks(5).orient("left");g.append("g").call(xAxis).attr("transform","translate(0.2, "+(HEIGHT/2+25)+")"),g.append("g").call(yAxis),g.selectAll(".domain").attr("fill","none").attr("stroke","black").attr("stroke-width",1.5),g.append("path").attr("fill","none").attr("stroke","steelblue").attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",line(idx))})})}},{key:"render",value:function(){var _this9=this;return _react2.default.createElement("div",{className:"signal-plots",ref:function(container){_this9.container=container}})}}]),SignalPlots}(_react.Component),EEGBrowser=function(_Component4){function EEGBrowser(props){_classCallCheck(this,EEGBrowser);var _this10=_possibleConstructorReturn(this,(EEGBrowser.__proto__||Object.getPrototypeOf(EEGBrowser)).call(this,props));return _this10.state={regions:makeRegions(NUM_REGIONS),selected:[]},_this10}return _inherits(EEGBrowser,_Component4),_createClass(EEGBrowser,[{key:"render",value:function(){var _this11=this,unselectRegion=function(region){_this11.setState({selected:_this11.state.selected.filter(function(r){return r!==region})})},selectRegion=function(region){_this11.setState({selected:_this11.state.selected.filter(function(r){return r!==region}).concat([region])})};return _react2.default.createElement("div",{className:"eeg-browser"},_react2.default.createElement(RegionSelect,{regions:this.state.regions,selected:this.state.selected,unselectRegion:unselectRegion,selectRegion:selectRegion}),_react2.default.createElement(MRIView,{regions:this.state.selected}),_react2.default.createElement(SignalPlots,{regions:this.state.selected}))}}]),EEGBrowser}(_react.Component);exports.default=EEGBrowser,window.EEGBrowser=_react2.default.createFactory(EEGBrowser)},15:function(module,exports){module.exports=React}});
//# sourceMappingURL=EEGBrowser.js.map